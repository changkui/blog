## BOM

`BOM`既浏览器对象模型(BOM, Browser Object Model)，是使用`JavaScript`开发Web应用程序的核心

在JavaScript高级程序设计一书中主要讲了关于DOM的以下内容

- 理解 `BOM`的核心----window对象
- 控制窗口及其弹窗
- 通过`location`对象获取页面信息
- 使用`navigator`对象了解浏览器
- 通过`history`对象操作浏览器历史


#### window对象

`BOM`的核心是`window`对象，表示为浏览器的实例。

`window`在浏览器中有两重身份：

	- `ECMAScript`中的`Global`对象
	- 浏览器窗口的`JavaScript`接口

这就是说网页中所有定义的对象、变量和函数都以`window`作为`Global`对象

###### Global作用域

`window`对象被复用为`ECMAScript`的`Global`对象

通过`var`声明的所有`全局`变量和函数都会变成`window`对象的属性和方法, 自动会成为`window`对象的成员

- 全局变量是`window`对象的属性
- 全局函数是`window`对象的方法

```js
可以理解为var声明的变量
var name = 1;
console.log(name)	// 1 
其实就是自动变成了
window.name = 1;
console.log(name) // 1
```

注意：但是如果使用`let`或`const`替代`var`，则不会把变量添加给全局对象

#### 窗口位置与像素比

`window`对象的位置可以通过不同的属性和方法来确定。

###### 窗口位置

现代浏览器提供了两个方法来获取浏览器相对于屏幕的位置：

- screenLeft 用于表示窗口相对于屏幕`左侧`的位置，返回css像素
- screenTop 用户表示窗口相对于屏幕`顶部`的位置，返回css像素

我们在使用`window.open()`新打开一个浏览器窗口之后有两个方法来移动当前新打开的窗口：

- `window.moveTo(0, 0)`把新打开的窗口相对于当前`屏幕`在`屏幕位置`上移动到`x`和`y`的坐标，也就是移动到距离`屏幕左上方`的`x`轴和`y`轴的距离
- `window.moveBy(0, 1)`把新打开的窗口相对于当前`位置`在`两个方向`上移动`x`和`y`的像素数，也就是移动到距离`当前位置`的`x`轴和`y`轴的距离

例如：

```js
// 把窗口移动到坐标位置(200, 300)
window.moveTo(200, 300)

// 把窗口向左移动50像素
window.moveBy(-50, 0)
```

注：以上方法根据浏览器支持度而定；

###### 像素比

css像素是Web开发中使用的统一像素单位，这个单位的背后其实是一个角度：0.0213°.

- window.devicePixelRatio：可以获取到当前屏幕的`物理像素`与`逻辑像素`之间的缩放系数,  可以理解为屏幕缩放像素比

例如：手机屏幕的物理分辨率可能是1920✖️1080，这样的话手机的像素可能非常小，所以浏览器就需要将其分辨率降为较低的`逻辑`分辨率640✖️320，通过`window.devicePixelRatio`获取到的值就是**3**, 这样一来12像素的文字实际上就会用36像素的物理像素来显示

#### 窗口大小

在现代浏览器中都支持4个属性：

- outerWidth：获取浏览器当前窗口**自身**的宽度`(整个浏览器全部的宽度，不管是在最外层window上使用，还是在窗格<frame>中使用)`
- outerHeight：获取浏览器当前窗口**自身**的高度`(整个浏览器全部的高度，不管是在最外层window上使用，还是在窗格<frame>中使用)`

- innerWidth：获取浏览器当前窗口中**页面视口**的宽度`(也就是不包含浏览器边框和工具栏)`
- innerHeight：获取浏览器当前窗口中**页面视口**的高度`(也就是不包含浏览器边框和工具栏)`

还可以通过`document`对象获取页面视图的宽度和高度`(当前浏览器必须处于标准模式CSS1Compat)`

- document.documentElement.clientWidth：获取浏览器当前窗口中**页面视口**的宽度
- document.documentElement.clientWidth：获取浏览器当前窗口中**页面视口**的高度

其中如果当前浏览器不处于标准模式`CSS1Compat`时，可以用一下两种方法获取浏览器的宽度和高度：

- document.body.clientWidth：获取浏览器当前窗口中**页面视口**的宽度
- document.body.clientHeight：获取浏览器当前窗口中**页面视口**的高度

 注：因为各个浏览器的差异，所以需要先确定用户是不是在使用移动设置，然后再决定使用那个属性



#### 视口位置

浏览器窗口可以通过滚动在有限的视口查看

使浏览器滚动的window的方法为以下2个方法：

```javascript
// 相对于当前视口向下滚动100像素
window.scrollBy(0, 100);

// 相当于当前视口向右滚动40像素
window.scrollBy(40, 0);

// 滚动到页面左上角
window.scrollTo(0, 0);

// 滚动到距离屏幕左边及顶边各100像素的位置
window.scrollTo(100, 100);

// 完整写法
window.scrollTo({
  left: 100,
  top: 100,
  behavior: 'auto'	// 正常滚动
})
window.scrollTo({
  left: 100,
  top: 100,
  behavior: 'smooth'	// 平滑滚动
})
```



#### 导航与打开新窗口

`window.open()`方法可以用于导航到指定URL，也可以用于打开新浏览器窗口。

`window.open()`方法接收**4**个参数：

- 要加载的URL
- 目标窗口
  - 可以是一个特殊的窗口名等同于`a`标签的`target`参数
    - _self：这个目标的值是默认目标，它使得目标文档载入并显示在相同的框架或者窗口中作为源文档
    - _parent：这个目标使得文档载入父窗口或者包含来超链接引用的框架的框架集。如果这个引用是在窗口或者在顶级框架中，那么它与目标 _self 等效
    - _top：这个目标使得文档载入包含这个超链接的窗口，用 _top 目标将会清除所有被包含的框架并将文档载入整个浏览器窗口
    - _blank：浏览器总在一个新打开、未命名的窗口中载入目标文档
  - 如果第二个参数是一个不是上面那4个属性并且是一个已经存在的窗口或窗格`(frame)`的名字，则会在对应的窗口或窗格中打开这个URL
- 特性字符串
- 表示新窗口在浏览器历史记录中是否替代当前加载页面的布尔值`(此参数只有在不打开新窗口时才会使用，一般使用很少)`



